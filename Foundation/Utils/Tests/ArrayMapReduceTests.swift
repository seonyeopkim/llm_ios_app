// ðŸ¤– Generated by Xcode Coding Intelligence powered by Claude Sonnet 4
// ðŸ§‘ Reviewed and modified by human

import Utils
import Testing

@Suite("Array mapReduce")
struct ArrayMapReduceTests {
    @Test("ì •ìˆ˜ ëˆ„ì  í•©ê³„ í…ŒìŠ¤íŠ¸")
    func testAccumulatingSum() {
        // Given
        let numbers = [1, 2, 3, 4, 5]
        
        // When
        let results = numbers.mapReduce(into: Int.zero) { accumulated, number in
            accumulated += number
            return accumulated
        }
        
        // Then
        #expect(results == [1, 3, 6, 10, 15], "ì •ìˆ˜ì˜ ëˆ„ì  í•©ê³„ë¥¼ ë°˜í™˜í•´ì•¼ í•¨")
    }
    
    @Test("ë¬¸ìžì—´ ëˆ„ì  í…ŒìŠ¤íŠ¸")
    func testAccumulatingString() {
        // Given
        let words = ["Hello", "Swift", "Testing"]
        
        // When
        let results = words.mapReduce(into: "") { accumulated, word in
            accumulated += word
            return accumulated
        }
        
        // Then
        #expect(results == ["Hello", "HelloSwift", "HelloSwiftTesting"], "ëˆ„ì ëœ ë¬¸ìžì—´ì„ ë°˜í™˜í•´ì•¼ í•¨")
    }
    
    @Test("ë¹ˆ ë°°ì—´ í…ŒìŠ¤íŠ¸")
    func testEmptyArray() {
        // Given
        let emptyArray = [Int]()
        
        // When
        let results = emptyArray.mapReduce(into: Int.zero) { _, _ in Int.zero }
        
        // Then
        #expect(results.isEmpty, "ë¹ˆ ë°°ì—´ì„ ë°˜í™˜í•´ì•¼ í•¨")
    }
    
    @Test("ë‹¤ì†Œ ë³µìž¡í•œ ê°ì²´ í…ŒìŠ¤íŠ¸")
    func testComplexObject() {
        struct Counter: Equatable {
            var count = 0
            var sum = 0
        }
        
        // Given
        let numbers = [10, 20, 30]
        
        // When
        let results = numbers.mapReduce(into: Counter()) { counter, number in
            counter.sum += number
            counter.count += 1
            return counter
        }
        
        // Then
        let expectedResults: [Counter] = [
            Counter(count: 1, sum: 10),
            Counter(count: 2, sum: 30),
            Counter(count: 3, sum: 60),
        ]
        #expect(results == expectedResults, "ê¸°ëŒ€í•˜ëŠ” ê²°ê³¼ì™€ ì¼ì¹˜í•´ì•¼ í•¨")
    }
    
    @Test("ì—ëŸ¬ ì „íŒŒ í…ŒìŠ¤íŠ¸")
    func testErrorPropagation() {
        enum MockError: Error {
            case simulatedError
        }
        
        // Given
        let numbers = [0, 1, 0]
        
        // When & Then
        #expect(throws: MockError.simulatedError) {
            try numbers.mapReduce(into: Int.zero) { accumulated, number in
                if number > .zero {
                    throw MockError.simulatedError
                }
                accumulated += number
                return accumulated
            }
        }
    }
}
